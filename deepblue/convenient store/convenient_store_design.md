
# 便利店的结构

 列出一个详细的流程

## 涉及到的各部分功能介绍
--------------------------------------
|                 |                   |
|                 |                   |
|                 |                   |
|   货物识别机    |      云端机       |
|                 |                   |
|                 |                   |
|                 |                   |
|                 |                   |
---------------------------------------
|                 |                   |
|                 |                   |
|                 |                   |
|                 |                   |
|   人物地图机    |       终端        |
|                 |                   |
|                 |                   |
|                 |                   |
---------------------------------------

1. 货物识别机
 负责识别购物者拿取商品。识别到拿取动作后将此商品(位置)信息发送到人物地图机，人物地图机根据位置和商品区域绑定购物者。解决后期云端对购物者付款的扣取；

2. 人物地图机
 负责识别并确定商品的购物者并计算需支付的价格。识别并跟踪进入超市的人，超市中的商品是分区域放置的，每个商品都有一个固定的区域。识别到人物的区域之后，可以联合货物的所在区域确定购物者。
 
3. 云端机
 云端机负责购物者的商品扣款。
 
4. 终端
 终端就是扫手设备。扫手完成后，云端机会收到信息。云端机将此信息下发到人物地图机，人物地图机开始追踪新的顾客。

 
## 通信方式
> 各个部分之间的通信是级联的，不会越级进行。

1. 人物地图机-货物识别机
 这两台机器都是由我们负责的，因此通信框架可以由我们确定。确定使用IOCP模型，使用的是TCP技术。
 其中要考虑到的问题：
 (1) 服务器的线程池管理，虽然只有个位数级别的客户端机。但是框架一定要为增加客户端考虑； 
 (2) 客户端主动查找服务器；
 (3) 客户端断线重连；
 (4) 客户端电源(空闲)管理；
 (5) 服务器宕机后，客户端重新主动查找服务器；

2. 人物地图机-云端机
 使用web-http通信。 商品结算信息。货物识别机确定商品被加入购物车，人物地图机确定商品的购物者，之后将购物者信息和价格信息发送到云端结算。
 

 
 
 
 
 
 


